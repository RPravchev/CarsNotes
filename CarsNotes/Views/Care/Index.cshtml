@*@model IEnumerable<FuelInfoViewModel>*@
@model CareInfoViewModel
@{
    ViewData["Title"] = "Care";
    var today = DateTime.Now.ToString("dd-MM-yyyy");
}

<div class="d-flex justify-content-between align-items-center mb-3" style="margin-top: 20px;">
    <h2>@ViewData["Title"]</h2>
    @if (User?.Identity?.IsAuthenticated == true)
    {
        <div>
            <a asp-controller="Car" asp-action="Details" asp-route-id="@TempData["CarId"]" class="btn btn-warning"><i class="fas fa-plus"></i>Back</a>
            <a asp-controller="Care" asp-action="Add" asp-route-id="@TempData["CarId"]" class="btn btn-primary"><i class="fas fa-plus"></i>Add Care</a>
        </div>
    }
</div>
<hr>
@if (Model.CareInfos.Count>0)
{
    <div class="row justify-content-center">
    <div class="col-md-4 text-left" style="margin-top: 20px">
        <form method="get">
        <table @*border="1"*@>
            <thead>
                <tr>
                    <th>Start Date</th>
                    <th>End Date</th>
                </tr>
            <thead>
            <tbody>
                <tr>
                    <th><input type="date" class="form-control" id="@Model.StartDate" name="startDate" value="@Model.StartDate.ToString("yyyy-MM-dd")" /></th>
                    <th><input type="date" class="form-control" id="@Model.EndDate" name="endDate" value="@Model.EndDate.ToString("yyyy-MM-dd")" /></th>
                </tr>
                <th></th>
                <th style="padding-block: 10px;"><button type="submit" a-right>Filter</button></th>
                 <tr>
                    <th><p class="card-text"><small class="text-muted"><b>Expenses total: </b></small></th>
                        <th><p class="card-text"><small class="text-muted">@Model.TotalExpensesForPeriod.ToString("# ###")</small></p></th>
                </tr>
             </tbody>
        </table>
        </form>
    </div>
    <div class="col-md-8" text-left>
        <p> </p>
        <table>
            <thead>
                <tr>
                    <th>Date Time </th>
                    <th>Type</th>
                    <th>Type Details </th>
                    <th>Manifacturer</th>
                    <th>Buyed From</th>
                    <th>Price Total </th>
                    <th>Is Pending </th>
                </tr>
            </thead>
            <tbody>
                @*@foreach (var fuel in Model)*@
                @for (int i = 0; i < Model.CareInfos.Count; i++)
                {
                    var expense = Model.CareInfos[i];
                    var rowClass = i % 2 == 0 ? "even-row" : "odd-row";
                    <tr class="@rowClass">
                        <td><small class="text-muted" style="padding-right: 6px">@expense.Date</small></td>
                        <td><small class="text-muted" style="padding-right: 6px; display: grid; justify-content: center" >@expense.Type</small></td>
                        <td><small class="text-muted" style="padding-right: 6px">@expense.TypeDetails</small></td>
                        <td><small class="text-muted" style="padding-right: 6px; display: grid; justify-content: center" >@expense.Manifacturer</small></td>
                        <td><small class="text-muted" style="padding-right: 6px">@expense.BuyedFrom</small></td>
                            <td><small class="text-muted" style="padding-right: 6px; display: grid; justify-content: center">@expense.PriceTotal</small></td>
                            @if (expense.IsPendingCare == true)
                            {
                                <td><small class="text-muted" style="padding-right: 6px; display: grid; justify-content: center; background-color: lightgreen">@expense.PriceTotal.ToString("# ###")</small></td>
                            }
                            else
                            {
                                <td><small class="text-muted" style="padding-right: 6px; display: grid; justify-content: center; background-color: lightyellow">@expense.PriceTotal.ToString("# ###")</small></td>
                            }
 
                         <td>                       
                            <a asp-controller="Care" asp-action="Edit" asp-route-id="@expense.Id" class="btn btn-primary">Edit</a>
                        </td>
 
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
}


